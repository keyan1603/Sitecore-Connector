<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/" xmlns:role="http://www.sitecore.net/xmlconfig/role/">
	<sitecore role:require="Standalone or ContentManagement">
		<settings>
			<setting name="HtmlEditor.RemoveScripts" value="false" />
			<setting name="AllowDuplicateItemNamesOnSameLevel" value="true" />
		</settings>
		<clientscripts>
			<htmleditor>
				<script  src="/sitecore/shell/Controls/Rich Text Editor/EmbedMedia/Brightcove RichText Commands.js" language="javascript" key="EmbedMedia"/>
				<script  src="/sitecore/shell/Controls/Rich Text Editor/EmbedLink/Brightcove RichText Commands.js" language="javascript" key="EmbedLink"/>
			</htmleditor>
		</clientscripts>
		<commands>
			<command name="MediaFramework:EmbedMedia" type="Brightcove.Web.Commands.EmbedMedia,Brightcove.Web" />
			<command name="MediaFramework:MediaPreview" type="Brightcove.Web.Commands.MediaPreview,Brightcove.Web" />
			<command name="MediaFramework:OpenUploader" type="Brightcove.Web.Commands.OpenUploader,Brightcove.Web" />
			<command name="mediaFramework:TextTracks:Brightcove" type="Brightcove.Web.Commands.TextTracks,Brightcove.Web"/>
		</commands>
		<pipelines>
			<initialize>
				<processor type="Brightcove.Web.Pipelines.RegisterRoutes, Brightcove.Web"
				  patch:before="processor[@type='Sitecore.Mvc.Pipelines.Loader.InitializeRoutes, Sitecore.Mvc']" />
				<processor patch:after="processor[@type='Sitecore.ExperienceAnalytics.Api.Pipelines.Initialize.WebApiInitializer, Sitecore.ExperienceAnalytics']" type="Brightcove.Web.Pipelines.AnalyticsWebApiInitializer, Brightcove.Web" />
			</initialize>
			<buckets.dialogSearchFilters>
				<processor type="Brightcove.Web.Pipelines.DialogSearchFilters.BrightcoveSearchFilters, Brightcove.Web"/>
			</buckets.dialogSearchFilters>
		</pipelines>
		<group groupName="analytics.aggregation">
			<pipelines>
				<interactions>
					<processor patch:after="processor[@type='Sitecore.Analytics.Aggregation.Pipelines.Interactions.LogAggregationInfo, Sitecore.Analytics.Aggregation']" type="Sitecore.MediaFramework.Pipelines.AnalyticsAggregation.Interactions.MediaEventsAggregation, Brightcove.Web" />
				</interactions>
			</pipelines>
		</group>
		<api>
			<services>
				<configuration type="Sitecore.Services.Infrastructure.Configuration.ServicesConfiguration, Sitecore.Services.Infrastructure">
					<allowedControllers hint="list:AddController">
						<reportsController>Sitecore.MediaFramework.Analytics.Dashboard.MFReportsController, Brightcove.Web</reportsController>
					</allowedControllers>
				</configuration>
			</services>
		</api>
		<contentSearch>
			<indexConfigurations>
				<defaultSolrIndexConfiguration type="Sitecore.ContentSearch.SolrProvider.SolrIndexConfiguration, Sitecore.ContentSearch.SolrProvider">
					<documentOptions type="Sitecore.ContentSearch.SolrProvider.SolrDocumentBuilderOptions, Sitecore.ContentSearch.SolrProvider">
						<exclude hint="list:AddExcludedField">
							<Labels>{F941D49C-AA5F-420C-A267-B9A342F3FE77}</Labels>
							<BrightcoveFolder>{90BDA98B-609D-4C55-AFA7-71F5C8F5EB30}</BrightcoveFolder>
						</exclude>
						<fields hint="raw:AddComputedIndexField">
							<field fieldName="labels" returnType="text">Brightcove.Web.Search.ComputedIndexFields.LabelsComputedIndexField,Brightcove.Web</field>
							<field fieldName="BrightcoveFolder" returnType="text">Brightcove.Web.Search.ComputedIndexFields.FolderComputedIndexField,Brightcove.Web</field>
						</fields>
					</documentOptions>
				</defaultSolrIndexConfiguration>
			</indexConfigurations>
		</contentSearch>
	</sitecore>
</configuration>

